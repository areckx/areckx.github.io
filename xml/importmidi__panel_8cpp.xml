<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.13">
  <compounddef id="importmidi__panel_8cpp" kind="file" language="C++">
    <compoundname>importmidi_panel.cpp</compoundname>
    <includes refid="importmidi__panel_8h" local="yes">importmidi_panel.h</includes>
    <includes refid="ui__importmidi__panel_8h" local="yes">ui_importmidi_panel.h</includes>
    <includes refid="importmidi__model_8h" local="yes">importmidi_model.h</includes>
    <includes refid="importmidi__lyrics_8h" local="yes">importmidi_lyrics.h</includes>
    <includes refid="importmidi__operations_8h" local="yes">importmidi_operations.h</includes>
    <includes refid="importmidi__delegate_8h" local="yes">importmidi_delegate.h</includes>
    <includes refid="importmidi__inner_8h" local="yes">importmidi_inner.h</includes>
    <includes refid="preferences_8h" local="yes">mscore/preferences.h</includes>
    <includes refid="musescore_8h" local="yes">musescore.h</includes>
    <includes refid="score_8h" local="yes">libmscore/score.h</includes>
    <incdepgraph>
      <node id="53834">
        <label>list</label>
      </node>
      <node id="53774">
        <label>QtWidgets/QWidget</label>
      </node>
      <node id="53828">
        <label>pitchspelling.h</label>
        <link refid="pitchspelling_8h_source"/>
        <childnode refid="53815" relation="include">
        </childnode>
      </node>
      <node id="53778">
        <label>importmidi_operations.h</label>
        <link refid="importmidi__operations_8h_source"/>
        <childnode refid="53779" relation="include">
        </childnode>
        <childnode refid="53784" relation="include">
        </childnode>
      </node>
      <node id="53830">
        <label>key.h</label>
        <link refid="key_8h_source"/>
      </node>
      <node id="53802">
        <label>QtWidgets/QDialog</label>
      </node>
      <node id="53796">
        <label>mscore/preferences.h</label>
        <link refid="preferences_8h_source"/>
        <childnode refid="53797" relation="include">
        </childnode>
        <childnode refid="53798" relation="include">
        </childnode>
        <childnode refid="53778" relation="include">
        </childnode>
      </node>
      <node id="53791">
        <label>importmidi_inner.h</label>
        <link refid="importmidi__inner_8h_source"/>
        <childnode refid="53780" relation="include">
        </childnode>
        <childnode refid="53792" relation="include">
        </childnode>
        <childnode refid="53779" relation="include">
        </childnode>
        <childnode refid="53793" relation="include">
        </childnode>
        <childnode refid="53794" relation="include">
        </childnode>
        <childnode refid="53795" relation="include">
        </childnode>
      </node>
      <node id="53760">
        <label>importmidi_panel.h</label>
        <link refid="importmidi__panel_8h_source"/>
      </node>
      <node id="53809">
        <label>QtWidgets/QScrollArea</label>
      </node>
      <node id="53769">
        <label>QtWidgets/QLabel</label>
      </node>
      <node id="53823">
        <label>shape.h</label>
        <link refid="shape_8h_source"/>
      </node>
      <node id="53798">
        <label>shortcut.h</label>
        <link refid="shortcut_8h_source"/>
        <childnode refid="53799" relation="include">
        </childnode>
        <childnode refid="53797" relation="include">
        </childnode>
      </node>
      <node id="53789">
        <label>importmidi_lyrics.h</label>
        <link refid="importmidi__lyrics_8h_source"/>
      </node>
      <node id="53846">
        <label>ui_newwizard.h</label>
        <link refid="ui__newwizard_8h_source"/>
        <childnode refid="53762" relation="include">
        </childnode>
        <childnode refid="53763" relation="include">
        </childnode>
        <childnode refid="53764" relation="include">
        </childnode>
        <childnode refid="53765" relation="include">
        </childnode>
        <childnode refid="53808" relation="include">
        </childnode>
        <childnode refid="53768" relation="include">
        </childnode>
        <childnode refid="53769" relation="include">
        </childnode>
        <childnode refid="53847" relation="include">
        </childnode>
        <childnode refid="53771" relation="include">
        </childnode>
        <childnode refid="53774" relation="include">
        </childnode>
      </node>
      <node id="53835">
        <label>mscoreview.h</label>
        <link refid="mscoreview_8h_source"/>
      </node>
      <node id="53817">
        <label>chordlist.h</label>
        <link refid="chordlist_8h_source"/>
      </node>
      <node id="53825">
        <label>bsymbol.h</label>
        <link refid="bsymbol_8h_source"/>
        <childnode refid="53820" relation="include">
        </childnode>
        <childnode refid="53826" relation="include">
        </childnode>
      </node>
      <node id="53790">
        <label>importmidi_delegate.h</label>
        <link refid="importmidi__delegate_8h_source"/>
        <childnode refid="53775" relation="include">
        </childnode>
      </node>
      <node id="53787">
        <label>map</label>
      </node>
      <node id="53801">
        <label>ui_measuresdialog.h</label>
        <link refid="ui__measuresdialog_8h_source"/>
        <childnode refid="53762" relation="include">
        </childnode>
        <childnode refid="53763" relation="include">
        </childnode>
        <childnode refid="53764" relation="include">
        </childnode>
        <childnode refid="53765" relation="include">
        </childnode>
        <childnode refid="53802" relation="include">
        </childnode>
        <childnode refid="53767" relation="include">
        </childnode>
        <childnode refid="53768" relation="include">
        </childnode>
        <childnode refid="53769" relation="include">
        </childnode>
        <childnode refid="53770" relation="include">
        </childnode>
        <childnode refid="53771" relation="include">
        </childnode>
        <childnode refid="53803" relation="include">
        </childnode>
        <childnode refid="53773" relation="include">
        </childnode>
      </node>
      <node id="53842">
        <label>newwizard.h</label>
        <link refid="newwizard_8h_source"/>
        <childnode refid="53843" relation="include">
        </childnode>
        <childnode refid="53846" relation="include">
        </childnode>
        <childnode refid="53848" relation="include">
        </childnode>
        <childnode refid="53849" relation="include">
        </childnode>
        <childnode refid="53830" relation="include">
        </childnode>
        <childnode refid="53781" relation="include">
        </childnode>
      </node>
      <node id="53807">
        <label>ui_aboutmusicxmlbox.h</label>
        <link refid="ui__aboutmusicxmlbox_8h_source"/>
        <childnode refid="53762" relation="include">
        </childnode>
        <childnode refid="53763" relation="include">
        </childnode>
        <childnode refid="53764" relation="include">
        </childnode>
        <childnode refid="53765" relation="include">
        </childnode>
        <childnode refid="53802" relation="include">
        </childnode>
        <childnode refid="53806" relation="include">
        </childnode>
        <childnode refid="53808" relation="include">
        </childnode>
        <childnode refid="53768" relation="include">
        </childnode>
        <childnode refid="53769" relation="include">
        </childnode>
        <childnode refid="53809" relation="include">
        </childnode>
        <childnode refid="53773" relation="include">
        </childnode>
        <childnode refid="53774" relation="include">
        </childnode>
      </node>
      <node id="53818">
        <label>durationtype.h</label>
        <link refid="durationtype_8h_source"/>
        <childnode refid="53781" relation="include">
        </childnode>
        <childnode refid="53819" relation="include">
        </childnode>
      </node>
      <node id="53792">
        <label>importmidi_tuplet.h</label>
        <link refid="importmidi__tuplet_8h_source"/>
        <childnode refid="53780" relation="include">
        </childnode>
      </node>
      <node id="53845">
        <label>QtWidgets/QRadioButton</label>
      </node>
      <node id="53811">
        <label>updatechecker.h</label>
        <link refid="updatechecker_8h_source"/>
      </node>
      <node id="53799">
        <label>icons.h</label>
        <link refid="icons_8h_source"/>
      </node>
      <node id="53771">
        <label>QtWidgets/QSpacerItem</label>
      </node>
      <node id="53759">
        <label>mscore/importmidi/importmidi_panel.cpp</label>
        <link refid="importmidi__panel_8cpp"/>
        <childnode refid="53760" relation="include">
        </childnode>
        <childnode refid="53761" relation="include">
        </childnode>
        <childnode refid="53777" relation="include">
        </childnode>
        <childnode refid="53789" relation="include">
        </childnode>
        <childnode refid="53778" relation="include">
        </childnode>
        <childnode refid="53790" relation="include">
        </childnode>
        <childnode refid="53791" relation="include">
        </childnode>
        <childnode refid="53796" relation="include">
        </childnode>
        <childnode refid="53800" relation="include">
        </childnode>
        <childnode refid="53813" relation="include">
        </childnode>
      </node>
      <node id="53849">
        <label>libmscore/timesig.h</label>
        <link refid="timesig_8h_source"/>
        <childnode refid="53820" relation="include">
        </childnode>
        <childnode refid="53785" relation="include">
        </childnode>
        <childnode refid="53815" relation="include">
        </childnode>
        <childnode refid="53850" relation="include">
        </childnode>
      </node>
      <node id="53836">
        <label>spannermap.h</label>
        <link refid="spannermap_8h_source"/>
        <childnode refid="53837" relation="include">
        </childnode>
      </node>
      <node id="53762">
        <label>QtCore/QVariant</label>
      </node>
      <node id="53843">
        <label>ui_timesigwizard.h</label>
        <link refid="ui__timesigwizard_8h_source"/>
        <childnode refid="53762" relation="include">
        </childnode>
        <childnode refid="53763" relation="include">
        </childnode>
        <childnode refid="53764" relation="include">
        </childnode>
        <childnode refid="53765" relation="include">
        </childnode>
        <childnode refid="53766" relation="include">
        </childnode>
        <childnode refid="53808" relation="include">
        </childnode>
        <childnode refid="53844" relation="include">
        </childnode>
        <childnode refid="53767" relation="include">
        </childnode>
        <childnode refid="53768" relation="include">
        </childnode>
        <childnode refid="53769" relation="include">
        </childnode>
        <childnode refid="53845" relation="include">
        </childnode>
        <childnode refid="53771" relation="include">
        </childnode>
        <childnode refid="53803" relation="include">
        </childnode>
        <childnode refid="53773" relation="include">
        </childnode>
        <childnode refid="53774" relation="include">
        </childnode>
      </node>
      <node id="53812">
        <label>libmscore/musescoreCore.h</label>
        <link refid="musescore_core_8h_source"/>
      </node>
      <node id="53780">
        <label>importmidi_fraction.h</label>
        <link refid="importmidi__fraction_8h_source"/>
        <childnode refid="53781" relation="include">
        </childnode>
      </node>
      <node id="53770">
        <label>QtWidgets/QPushButton</label>
      </node>
      <node id="53847">
        <label>QtWidgets/QLineEdit</label>
      </node>
      <node id="53779">
        <label>importmidi_operation.h</label>
        <link refid="importmidi__operation_8h_source"/>
        <childnode refid="53780" relation="include">
        </childnode>
        <childnode refid="53783" relation="include">
        </childnode>
      </node>
      <node id="53837">
        <label>thirdparty/intervaltree/IntervalTree.h</label>
        <link refid="_interval_tree_8h_source"/>
        <childnode refid="53793" relation="include">
        </childnode>
        <childnode refid="53838" relation="include">
        </childnode>
        <childnode refid="53839" relation="include">
        </childnode>
      </node>
      <node id="53772">
        <label>QtWidgets/QToolButton</label>
      </node>
      <node id="53804">
        <label>ui_insertmeasuresdialog.h</label>
        <link refid="ui__insertmeasuresdialog_8h_source"/>
        <childnode refid="53762" relation="include">
        </childnode>
        <childnode refid="53763" relation="include">
        </childnode>
        <childnode refid="53764" relation="include">
        </childnode>
        <childnode refid="53765" relation="include">
        </childnode>
        <childnode refid="53802" relation="include">
        </childnode>
        <childnode refid="53767" relation="include">
        </childnode>
        <childnode refid="53768" relation="include">
        </childnode>
        <childnode refid="53769" relation="include">
        </childnode>
        <childnode refid="53770" relation="include">
        </childnode>
        <childnode refid="53771" relation="include">
        </childnode>
        <childnode refid="53803" relation="include">
        </childnode>
        <childnode refid="53773" relation="include">
        </childnode>
      </node>
      <node id="53829">
        <label>tremolo.h</label>
        <link refid="tremolo_8h_source"/>
        <childnode refid="53824" relation="include">
        </childnode>
      </node>
      <node id="53775">
        <label>mscore/importmidi/importmidi_view.h</label>
        <link refid="importmidi__view_8h_source"/>
        <childnode refid="53776" relation="include">
        </childnode>
      </node>
      <node id="53793">
        <label>vector</label>
      </node>
      <node id="53826">
        <label>elementlayout.h</label>
        <link refid="elementlayout_8h_source"/>
      </node>
      <node id="53768">
        <label>QtWidgets/QHeaderView</label>
      </node>
      <node id="53821">
        <label>spatium.h</label>
        <link refid="spatium_8h_source"/>
      </node>
      <node id="53841">
        <label>property.h</label>
        <link refid="property_8h_source"/>
      </node>
      <node id="53795">
        <label>utility</label>
      </node>
      <node id="53761">
        <label>ui_importmidi_panel.h</label>
        <link refid="ui__importmidi__panel_8h_source"/>
        <childnode refid="53762" relation="include">
        </childnode>
        <childnode refid="53763" relation="include">
        </childnode>
        <childnode refid="53764" relation="include">
        </childnode>
        <childnode refid="53765" relation="include">
        </childnode>
        <childnode refid="53766" relation="include">
        </childnode>
        <childnode refid="53767" relation="include">
        </childnode>
        <childnode refid="53768" relation="include">
        </childnode>
        <childnode refid="53769" relation="include">
        </childnode>
        <childnode refid="53770" relation="include">
        </childnode>
        <childnode refid="53771" relation="include">
        </childnode>
        <childnode refid="53772" relation="include">
        </childnode>
        <childnode refid="53773" relation="include">
        </childnode>
        <childnode refid="53774" relation="include">
        </childnode>
        <childnode refid="53775" relation="include">
        </childnode>
      </node>
      <node id="53781">
        <label>libmscore/fraction.h</label>
        <link refid="fraction_8h_source"/>
        <childnode refid="53782" relation="include">
        </childnode>
      </node>
      <node id="53824">
        <label>symbol.h</label>
        <link refid="symbol_8h_source"/>
        <childnode refid="53825" relation="include">
        </childnode>
      </node>
      <node id="53763">
        <label>QtWidgets/QAction</label>
      </node>
      <node id="53816">
        <label>style.h</label>
        <link refid="style_8h_source"/>
        <childnode refid="53817" relation="include">
        </childnode>
      </node>
      <node id="53765">
        <label>QtWidgets/QButtonGroup</label>
      </node>
      <node id="53797">
        <label>globals.h</label>
        <link refid="globals_8h_source"/>
      </node>
      <node id="53784">
        <label>midi/midifile.h</label>
        <link refid="midifile_8h_source"/>
        <childnode refid="53785" relation="include">
        </childnode>
        <childnode refid="53786" relation="include">
        </childnode>
      </node>
      <node id="53767">
        <label>QtWidgets/QHBoxLayout</label>
      </node>
      <node id="53848">
        <label>QWizard</label>
      </node>
      <node id="53831">
        <label>beam.h</label>
        <link refid="beam_8h_source"/>
        <childnode refid="53820" relation="include">
        </childnode>
        <childnode refid="53818" relation="include">
        </childnode>
      </node>
      <node id="53803">
        <label>QtWidgets/QSpinBox</label>
      </node>
      <node id="53840">
        <label>layoutbreak.h</label>
        <link refid="layoutbreak_8h_source"/>
        <childnode refid="53820" relation="include">
        </childnode>
      </node>
      <node id="53820">
        <label>element.h</label>
        <link refid="element_8h_source"/>
        <childnode refid="53821" relation="include">
        </childnode>
        <childnode refid="53781" relation="include">
        </childnode>
        <childnode refid="53822" relation="include">
        </childnode>
        <childnode refid="53823" relation="include">
        </childnode>
      </node>
      <node id="53833">
        <label>synthesizerstate.h</label>
        <link refid="synthesizerstate_8h_source"/>
        <childnode refid="53834" relation="include">
        </childnode>
      </node>
      <node id="53839">
        <label>iostream</label>
      </node>
      <node id="53806">
        <label>QtWidgets/QDialogButtonBox</label>
      </node>
      <node id="53815">
        <label>mscore.h</label>
        <link refid="mscore_8h_source"/>
        <childnode refid="53782" relation="include">
        </childnode>
        <childnode refid="53816" relation="include">
        </childnode>
      </node>
      <node id="53850">
        <label>groups.h</label>
        <link refid="groups_8h_source"/>
        <childnode refid="53781" relation="include">
        </childnode>
        <childnode refid="53815" relation="include">
        </childnode>
        <childnode refid="53818" relation="include">
        </childnode>
        <childnode refid="53831" relation="include">
        </childnode>
      </node>
      <node id="53794">
        <label>cstddef</label>
      </node>
      <node id="53814">
        <label>input.h</label>
        <link refid="input_8h_source"/>
        <childnode refid="53815" relation="include">
        </childnode>
        <childnode refid="53818" relation="include">
        </childnode>
        <childnode refid="53831" relation="include">
        </childnode>
      </node>
      <node id="53810">
        <label>singleapp/src/QtSingleApplication</label>
      </node>
      <node id="53764">
        <label>QtWidgets/QApplication</label>
      </node>
      <node id="53827">
        <label>noteevent.h</label>
        <link refid="noteevent_8h_source"/>
      </node>
      <node id="53800">
        <label>musescore.h</label>
        <link refid="musescore_8h_source"/>
        <childnode refid="53782" relation="include">
        </childnode>
        <childnode refid="53797" relation="include">
        </childnode>
        <childnode refid="53801" relation="include">
        </childnode>
        <childnode refid="53804" relation="include">
        </childnode>
        <childnode refid="53805" relation="include">
        </childnode>
        <childnode refid="53807" relation="include">
        </childnode>
        <childnode refid="53810" relation="include">
        </childnode>
        <childnode refid="53811" relation="include">
        </childnode>
        <childnode refid="53812" relation="include">
        </childnode>
        <childnode refid="53813" relation="include">
        </childnode>
        <childnode refid="53842" relation="include">
        </childnode>
      </node>
      <node id="53766">
        <label>QtWidgets/QComboBox</label>
      </node>
      <node id="53777">
        <label>importmidi_model.h</label>
        <link refid="importmidi__model_8h_source"/>
        <childnode refid="53778" relation="include">
        </childnode>
        <childnode refid="53788" relation="include">
        </childnode>
      </node>
      <node id="53776">
        <label>QTableView</label>
      </node>
      <node id="53805">
        <label>ui_aboutbox.h</label>
        <link refid="ui__aboutbox_8h_source"/>
        <childnode refid="53762" relation="include">
        </childnode>
        <childnode refid="53763" relation="include">
        </childnode>
        <childnode refid="53764" relation="include">
        </childnode>
        <childnode refid="53765" relation="include">
        </childnode>
        <childnode refid="53802" relation="include">
        </childnode>
        <childnode refid="53806" relation="include">
        </childnode>
        <childnode refid="53767" relation="include">
        </childnode>
        <childnode refid="53768" relation="include">
        </childnode>
        <childnode refid="53769" relation="include">
        </childnode>
        <childnode refid="53771" relation="include">
        </childnode>
        <childnode refid="53772" relation="include">
        </childnode>
        <childnode refid="53773" relation="include">
        </childnode>
      </node>
      <node id="53783">
        <label>set</label>
      </node>
      <node id="53782">
        <label>config.h</label>
      </node>
      <node id="53838">
        <label>algorithm</label>
      </node>
      <node id="53813">
        <label>libmscore/score.h</label>
        <link refid="score_8h"/>
        <childnode refid="53782" relation="include">
        </childnode>
        <childnode refid="53814" relation="include">
        </childnode>
        <childnode refid="53832" relation="include">
        </childnode>
        <childnode refid="53833" relation="include">
        </childnode>
        <childnode refid="53835" relation="include">
        </childnode>
        <childnode refid="53836" relation="include">
        </childnode>
        <childnode refid="53840" relation="include">
        </childnode>
        <childnode refid="53841" relation="include">
        </childnode>
      </node>
      <node id="53786">
        <label>synthesizer/event.h</label>
        <link refid="synthesizer_2event_8h_source"/>
        <childnode refid="53787" relation="include">
        </childnode>
      </node>
      <node id="53785">
        <label>libmscore/sig.h</label>
        <link refid="sig_8h_source"/>
        <childnode refid="53781" relation="include">
        </childnode>
      </node>
      <node id="53822">
        <label>scoreElement.h</label>
        <link refid="score_element_8h_source"/>
      </node>
      <node id="53808">
        <label>QtWidgets/QGridLayout</label>
      </node>
      <node id="53844">
        <label>QtWidgets/QGroupBox</label>
      </node>
      <node id="53832">
        <label>select.h</label>
        <link refid="select_8h_source"/>
        <childnode refid="53828" relation="include">
        </childnode>
        <childnode refid="53815" relation="include">
        </childnode>
        <childnode refid="53818" relation="include">
        </childnode>
      </node>
      <node id="53788">
        <label>memory</label>
      </node>
      <node id="53773">
        <label>QtWidgets/QVBoxLayout</label>
      </node>
      <node id="53819">
        <label>note.h</label>
        <link refid="note_8h"/>
        <childnode refid="53820" relation="include">
        </childnode>
        <childnode refid="53824" relation="include">
        </childnode>
        <childnode refid="53827" relation="include">
        </childnode>
        <childnode refid="53828" relation="include">
        </childnode>
        <childnode refid="53823" relation="include">
        </childnode>
        <childnode refid="53829" relation="include">
        </childnode>
        <childnode refid="53830" relation="include">
        </childnode>
      </node>
    </incdepgraph>
    <innernamespace refid="namespace_ms">Ms</innernamespace>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="preprocessor">#include<sp/>&quot;importmidi_panel.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;ui_importmidi_panel.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;importmidi_model.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;importmidi_lyrics.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;importmidi_operations.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;importmidi_delegate.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;importmidi_inner.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;mscore/preferences.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;musescore.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="10"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="score_8h" kindref="compound">libmscore/score.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="11"><highlight class="normal"></highlight></codeline>
<codeline lineno="12"><highlight class="normal"></highlight></codeline>
<codeline lineno="13"><highlight class="normal"></highlight><highlight class="keyword">namespace<sp/></highlight><highlight class="normal"><ref refid="namespace_ms" kindref="compound">Ms</ref><sp/>{</highlight></codeline>
<codeline lineno="14"><highlight class="normal"></highlight></codeline>
<codeline lineno="15"><highlight class="normal">ImportMidiPanel::ImportMidiPanel(QWidget<sp/>*parent)</highlight></codeline>
<codeline lineno="16"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>:<sp/>QWidget(parent)</highlight></codeline>
<codeline lineno="17"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>,<sp/>_ui(new<sp/><ref refid="namespace_ui" kindref="compound">Ui</ref>::ImportMidiPanel)</highlight></codeline>
<codeline lineno="18"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>,<sp/>_updateUiTimer(new<sp/>QTimer)</highlight></codeline>
<codeline lineno="19"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>,<sp/>_preferredVisible(false)</highlight></codeline>
<codeline lineno="20"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>,<sp/>_importInProgress(false)</highlight></codeline>
<codeline lineno="21"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>,<sp/>_reopenInProgress(false)</highlight></codeline>
<codeline lineno="22"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="23"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>_ui-&gt;setupUi(</highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="24"><highlight class="normal"></highlight></codeline>
<codeline lineno="25"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>_model<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>TracksModel();</highlight></codeline>
<codeline lineno="26"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>_delegate<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>OperationsDelegate(parentWidget(),<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="27"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>_ui-&gt;tracksView-&gt;setModel(_model);</highlight></codeline>
<codeline lineno="28"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>_ui-&gt;tracksView-&gt;setItemDelegate(_delegate);</highlight></codeline>
<codeline lineno="29"><highlight class="normal"></highlight></codeline>
<codeline lineno="30"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>setupUi();</highlight></codeline>
<codeline lineno="31"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="32"><highlight class="normal"></highlight></codeline>
<codeline lineno="33"><highlight class="normal">ImportMidiPanel::~ImportMidiPanel()</highlight></codeline>
<codeline lineno="34"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="35"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/>_ui;</highlight></codeline>
<codeline lineno="36"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="37"><highlight class="normal"></highlight></codeline>
<codeline lineno="38"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>ImportMidiPanel::setMidiFile(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>QString<sp/>&amp;fileName)</highlight></codeline>
<codeline lineno="39"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="40"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(_reopenInProgress)</highlight></codeline>
<codeline lineno="41"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_reopenInProgress<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="42"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(_midiFile<sp/>==<sp/>fileName<sp/>||<sp/>_importInProgress)</highlight></codeline>
<codeline lineno="43"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="44"><highlight class="normal"></highlight></codeline>
<codeline lineno="45"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>_midiFile<sp/>=<sp/>fileName;</highlight></codeline>
<codeline lineno="46"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>updateUi();</highlight></codeline>
<codeline lineno="47"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!QFile(_midiFile).exists())</highlight></codeline>
<codeline lineno="48"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="49"><highlight class="normal"></highlight></codeline>
<codeline lineno="50"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>MidiOperations::Data<sp/>&amp;opers<sp/>=<sp/>preferences.midiImportOperations;</highlight></codeline>
<codeline lineno="51"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>MidiOperations::CurrentMidiFileSetter<sp/>setCurrentMidiFile(opers,<sp/>_midiFile);</highlight></codeline>
<codeline lineno="52"><highlight class="normal"></highlight></codeline>
<codeline lineno="53"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(opers.data()-&gt;processingsOfOpenedFile<sp/>==<sp/>1)<sp/>{<sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>initial<sp/>processing<sp/>of<sp/>MIDI<sp/>file</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="54"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>++opers.data()-&gt;processingsOfOpenedFile;</highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>resetTableViewState();</highlight></codeline>
<codeline lineno="56"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_model-&gt;clear();</highlight></codeline>
<codeline lineno="57"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>resetTableViewState();</highlight></codeline>
<codeline lineno="58"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_model-&gt;reset(opers.data()-&gt;trackOpers,</highlight></codeline>
<codeline lineno="59"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>MidiLyrics::makeLyricsListForUI(),</highlight></codeline>
<codeline lineno="60"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>opers.data()-&gt;trackCount,</highlight></codeline>
<codeline lineno="61"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_midiFile,</highlight></codeline>
<codeline lineno="62"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>!opers.data()-&gt;humanBeatData.beatSet.empty(),</highlight></codeline>
<codeline lineno="63"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>opers.data()-&gt;hasTempoText,</highlight></codeline>
<codeline lineno="64"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>!opers.data()-&gt;chordNames.empty());</highlight></codeline>
<codeline lineno="65"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>saveTableViewState();</highlight></codeline>
<codeline lineno="66"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="67"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>switch<sp/>to<sp/>already<sp/>opened<sp/>MIDI<sp/>file</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="68"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_model-&gt;reset(opers.data()-&gt;trackOpers,</highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>MidiLyrics::makeLyricsListForUI(),</highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>opers.data()-&gt;trackCount,</highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_midiFile,</highlight></codeline>
<codeline lineno="72"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>!opers.data()-&gt;humanBeatData.beatSet.empty(),</highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>opers.data()-&gt;hasTempoText,</highlight></codeline>
<codeline lineno="74"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>!opers.data()-&gt;chordNames.empty());</highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>restoreTableViewState();</highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="77"><highlight class="normal"></highlight></codeline>
<codeline lineno="78"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>_ui-&gt;tracksView-&gt;setFrozenRowCount(_model-&gt;frozenRowCount());</highlight></codeline>
<codeline lineno="79"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>_ui-&gt;tracksView-&gt;setFrozenColCount(_model-&gt;frozenColCount());</highlight></codeline>
<codeline lineno="80"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>_ui-&gt;comboBoxCharset-&gt;setCurrentText(opers.data()-&gt;charset);</highlight></codeline>
<codeline lineno="81"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>tracks<sp/>view<sp/>has<sp/>multiple<sp/>headers<sp/>(need<sp/>for<sp/>frozen<sp/>rows/columns)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="82"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>so<sp/>to<sp/>set<sp/>all<sp/>headers<sp/>special<sp/>methods<sp/>there<sp/>have<sp/>been<sp/>implemented</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="83"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>_ui-&gt;tracksView-&gt;setHHeaderResizeMode(QHeaderView::ResizeToContents);</highlight></codeline>
<codeline lineno="84"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="85"><highlight class="normal"></highlight></codeline>
<codeline lineno="86"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>ImportMidiPanel::saveTableViewState()</highlight></codeline>
<codeline lineno="87"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="88"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>MidiOperations::Data<sp/>&amp;opers<sp/>=<sp/>preferences.midiImportOperations;</highlight></codeline>
<codeline lineno="89"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>MidiOperations::CurrentMidiFileSetter<sp/>setCurrentMidiFile(opers,<sp/>_midiFile);</highlight></codeline>
<codeline lineno="90"><highlight class="normal"></highlight></codeline>
<codeline lineno="91"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>QByteArray<sp/>hData<sp/>=<sp/>_ui-&gt;tracksView-&gt;horizontalHeader()-&gt;saveState();</highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>QByteArray<sp/>vData<sp/>=<sp/>_ui-&gt;tracksView-&gt;verticalHeader()-&gt;saveState();</highlight></codeline>
<codeline lineno="93"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>opers.data()-&gt;HHeaderData<sp/>=<sp/>hData;</highlight></codeline>
<codeline lineno="94"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>opers.data()-&gt;VHeaderData<sp/>=<sp/>vData;</highlight></codeline>
<codeline lineno="95"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="96"><highlight class="normal"></highlight></codeline>
<codeline lineno="97"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>ImportMidiPanel::restoreTableViewState()</highlight></codeline>
<codeline lineno="98"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="99"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>MidiOperations::Data<sp/>&amp;opers<sp/>=<sp/>preferences.midiImportOperations;</highlight></codeline>
<codeline lineno="100"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>MidiOperations::CurrentMidiFileSetter<sp/>setCurrentMidiFile(opers,<sp/>_midiFile);</highlight></codeline>
<codeline lineno="101"><highlight class="normal"></highlight></codeline>
<codeline lineno="102"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>QByteArray<sp/>hData<sp/>=<sp/>opers.data()-&gt;HHeaderData;</highlight></codeline>
<codeline lineno="103"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>QByteArray<sp/>vData<sp/>=<sp/>opers.data()-&gt;VHeaderData;</highlight></codeline>
<codeline lineno="104"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>_ui-&gt;tracksView-&gt;restoreHHeaderState(hData);</highlight></codeline>
<codeline lineno="105"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>_ui-&gt;tracksView-&gt;restoreVHeaderState(vData);</highlight></codeline>
<codeline lineno="106"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="107"><highlight class="normal"></highlight></codeline>
<codeline lineno="108"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>ImportMidiPanel::resetTableViewState()</highlight></codeline>
<codeline lineno="109"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="110"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>_ui-&gt;tracksView-&gt;setFrozenRowCount(0);</highlight></codeline>
<codeline lineno="111"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>_ui-&gt;tracksView-&gt;setFrozenColCount(0);</highlight></codeline>
<codeline lineno="112"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>_ui-&gt;tracksView-&gt;resetHHeader();</highlight></codeline>
<codeline lineno="113"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>_ui-&gt;tracksView-&gt;resetVHeader();</highlight></codeline>
<codeline lineno="114"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="115"><highlight class="normal"></highlight></codeline>
<codeline lineno="116"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>ImportMidiPanel::isMidiFile(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>QString<sp/>&amp;fileName)</highlight></codeline>
<codeline lineno="117"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="118"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>QString<sp/>extension<sp/>=<sp/>QFileInfo(fileName).suffix().toLower();</highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(extension<sp/>==<sp/></highlight><highlight class="stringliteral">&quot;mid&quot;</highlight><highlight class="normal"><sp/>||<sp/>extension<sp/>==<sp/></highlight><highlight class="stringliteral">&quot;midi&quot;</highlight><highlight class="normal"><sp/>||<sp/>extension<sp/>==<sp/></highlight><highlight class="stringliteral">&quot;kar&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="120"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="121"><highlight class="normal"></highlight></codeline>
<codeline lineno="122"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>ImportMidiPanel::setupUi()</highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="124"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>connect(_updateUiTimer,<sp/>SIGNAL(timeout()),<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">,<sp/>SLOT(updateUi()));</highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>connect(_ui-&gt;pushButtonApply,<sp/>SIGNAL(clicked()),<sp/>SLOT(applyMidiImport()));</highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>connect(_ui-&gt;pushButtonCancel,<sp/>SIGNAL(clicked()),<sp/>SLOT(cancelChanges()));</highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>connect(_ui-&gt;pushButtonUp,<sp/>SIGNAL(clicked()),<sp/>SLOT(moveTrackUp()));</highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>connect(_ui-&gt;pushButtonDown,<sp/>SIGNAL(clicked()),<sp/>SLOT(moveTrackDown()));</highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>connect(_ui-&gt;toolButtonHideMidiPanel,<sp/>SIGNAL(clicked()),<sp/>SLOT(hidePanel()));</highlight></codeline>
<codeline lineno="130"><highlight class="normal"></highlight></codeline>
<codeline lineno="131"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>_updateUiTimer-&gt;start(100);</highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>updateUi();</highlight></codeline>
<codeline lineno="133"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>_ui-&gt;tracksView-&gt;setVHeaderDefaultSectionSize(24);</highlight></codeline>
<codeline lineno="134"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>_ui-&gt;comboBoxCharset-&gt;setSizeAdjustPolicy(QComboBox::AdjustToMinimumContentsLengthWithIcon);</highlight></codeline>
<codeline lineno="135"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>fillCharsetList();</highlight></codeline>
<codeline lineno="136"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="137"><highlight class="normal"></highlight></codeline>
<codeline lineno="138"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>ImportMidiPanel::fillCharsetList()</highlight></codeline>
<codeline lineno="139"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="140"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>QFontMetrics<sp/>fm(_ui-&gt;comboBoxCharset-&gt;font());</highlight></codeline>
<codeline lineno="141"><highlight class="normal"></highlight></codeline>
<codeline lineno="142"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>_ui-&gt;comboBoxCharset-&gt;clear();</highlight></codeline>
<codeline lineno="143"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>QList&lt;QByteArray&gt;<sp/>charsets<sp/>=<sp/>QTextCodec::availableCodecs();</highlight></codeline>
<codeline lineno="144"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>qSort(charsets.begin(),<sp/>charsets.end());</highlight></codeline>
<codeline lineno="145"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>idx<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="146"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>maxWidth<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="147"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">auto</highlight><highlight class="normal"><sp/>&amp;charset:<sp/>charsets)<sp/>{</highlight></codeline>
<codeline lineno="148"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_ui-&gt;comboBoxCharset-&gt;addItem(charset);</highlight></codeline>
<codeline lineno="149"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(charset<sp/>==<sp/>MidiCharset::defaultCharset())</highlight></codeline>
<codeline lineno="150"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_ui-&gt;comboBoxCharset-&gt;setCurrentIndex(idx);</highlight></codeline>
<codeline lineno="151"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>newWidth<sp/>=<sp/>fm.width(charset);</highlight></codeline>
<codeline lineno="152"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(newWidth<sp/>&gt;<sp/>maxWidth)</highlight></codeline>
<codeline lineno="153"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>maxWidth<sp/>=<sp/>newWidth;</highlight></codeline>
<codeline lineno="154"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>++idx;</highlight></codeline>
<codeline lineno="155"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="156"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>_ui-&gt;comboBoxCharset-&gt;view()-&gt;setMinimumWidth(maxWidth);</highlight></codeline>
<codeline lineno="157"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="158"><highlight class="normal"></highlight></codeline>
<codeline lineno="159"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>ImportMidiPanel::updateUi()</highlight></codeline>
<codeline lineno="160"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="161"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>_ui-&gt;pushButtonApply-&gt;setEnabled(canImportMidi());</highlight></codeline>
<codeline lineno="162"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>_ui-&gt;pushButtonCancel-&gt;setEnabled(canTryCancelChanges());</highlight></codeline>
<codeline lineno="163"><highlight class="normal"></highlight></codeline>
<codeline lineno="164"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>visualIndex<sp/>=<sp/>currentVisualIndex();</highlight></codeline>
<codeline lineno="165"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>_ui-&gt;pushButtonUp-&gt;setEnabled(canMoveTrackUp(visualIndex));</highlight></codeline>
<codeline lineno="166"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>_ui-&gt;pushButtonDown-&gt;setEnabled(canMoveTrackDown(visualIndex));</highlight></codeline>
<codeline lineno="167"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="168"><highlight class="normal"></highlight></codeline>
<codeline lineno="169"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>ImportMidiPanel::hidePanel()</highlight></codeline>
<codeline lineno="170"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="171"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(isVisible())<sp/>{</highlight></codeline>
<codeline lineno="172"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setVisible(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="173"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>emit<sp/>closeClicked();</highlight></codeline>
<codeline lineno="174"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_preferredVisible<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="175"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="176"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="177"><highlight class="normal"></highlight></codeline>
<codeline lineno="178"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>ImportMidiPanel::setReorderedIndexes()</highlight></codeline>
<codeline lineno="179"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="180"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">auto</highlight><highlight class="normal"><sp/>&amp;opers<sp/>=<sp/>preferences.midiImportOperations;</highlight></codeline>
<codeline lineno="181"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i<sp/>!=<sp/>_model-&gt;trackCount();<sp/>++i)<sp/>{</highlight></codeline>
<codeline lineno="182"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>trackRow<sp/>=<sp/>_model-&gt;rowFromTrackIndex(i);</highlight></codeline>
<codeline lineno="183"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>reorderedRow<sp/>=<sp/>_ui-&gt;tracksView-&gt;verticalHeader()-&gt;logicalIndex(trackRow);</highlight></codeline>
<codeline lineno="184"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>reorderedIndex<sp/>=<sp/>_model-&gt;trackIndexFromRow(reorderedRow);</highlight></codeline>
<codeline lineno="185"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>opers.data()-&gt;trackOpers.trackIndexAfterReorder.setValue(reorderedIndex,<sp/>i);</highlight></codeline>
<codeline lineno="186"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="187"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="188"><highlight class="normal"></highlight></codeline>
<codeline lineno="189"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>ImportMidiPanel::applyMidiImport()</highlight></codeline>
<codeline lineno="190"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="191"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!canImportMidi())</highlight></codeline>
<codeline lineno="192"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="193"><highlight class="normal"></highlight></codeline>
<codeline lineno="194"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>_importInProgress<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="195"><highlight class="normal"></highlight></codeline>
<codeline lineno="196"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">auto</highlight><highlight class="normal"><sp/>&amp;opers<sp/>=<sp/>preferences.midiImportOperations;</highlight></codeline>
<codeline lineno="197"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>MidiOperations::CurrentMidiFileSetter<sp/>setCurrentMidiFile(opers,<sp/>_midiFile);</highlight></codeline>
<codeline lineno="198"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>update<sp/>charset</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="199"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(opers.data()-&gt;charset<sp/>!=<sp/>_ui-&gt;comboBoxCharset-&gt;currentText())<sp/>{</highlight></codeline>
<codeline lineno="200"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>opers.data()-&gt;charset<sp/>=<sp/>_ui-&gt;comboBoxCharset-&gt;currentText();</highlight></codeline>
<codeline lineno="201"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>need<sp/>to<sp/>update<sp/>model<sp/>because<sp/>of<sp/>charset<sp/>change</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="202"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_model-&gt;updateCharset();</highlight></codeline>
<codeline lineno="203"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="204"><highlight class="normal"></highlight></codeline>
<codeline lineno="205"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>_model-&gt;notifyAllApplied();</highlight></codeline>
<codeline lineno="206"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>opers.data()-&gt;trackOpers<sp/>=<sp/>_model-&gt;trackOpers();</highlight></codeline>
<codeline lineno="207"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>setReorderedIndexes();</highlight></codeline>
<codeline lineno="208"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>prevent<sp/>from<sp/>showing<sp/>save<sp/>request<sp/>dialog<sp/>on<sp/>every<sp/>&apos;apply<sp/>MIDI<sp/>import&apos;<sp/>call</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="209"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>mscore-&gt;currentScore()-&gt;setCreated(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="210"><highlight class="normal"></highlight></codeline>
<codeline lineno="211"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>mscore-&gt;openScore(_midiFile);</highlight></codeline>
<codeline lineno="212"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>saveTableViewState();</highlight></codeline>
<codeline lineno="213"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>_importInProgress<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="214"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="215"><highlight class="normal"></highlight></codeline>
<codeline lineno="216"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>ImportMidiPanel::cancelChanges()</highlight></codeline>
<codeline lineno="217"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="218"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!canTryCancelChanges())</highlight></codeline>
<codeline lineno="219"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="220"><highlight class="normal"></highlight></codeline>
<codeline lineno="221"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">auto</highlight><highlight class="normal"><sp/>&amp;opers<sp/>=<sp/>preferences.midiImportOperations;</highlight></codeline>
<codeline lineno="222"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>MidiOperations::CurrentMidiFileSetter<sp/>setCurrentMidiFile(opers,<sp/>_midiFile);</highlight></codeline>
<codeline lineno="223"><highlight class="normal"></highlight></codeline>
<codeline lineno="224"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>_model-&gt;reset(opers.data()-&gt;trackOpers,</highlight></codeline>
<codeline lineno="225"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>MidiLyrics::makeLyricsListForUI(),</highlight></codeline>
<codeline lineno="226"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>opers.data()-&gt;trackCount,</highlight></codeline>
<codeline lineno="227"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_midiFile,</highlight></codeline>
<codeline lineno="228"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>!opers.data()-&gt;humanBeatData.beatSet.empty(),</highlight></codeline>
<codeline lineno="229"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>opers.data()-&gt;hasTempoText,</highlight></codeline>
<codeline lineno="230"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>!opers.data()-&gt;chordNames.empty());</highlight></codeline>
<codeline lineno="231"><highlight class="normal"></highlight></codeline>
<codeline lineno="232"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>restoreTableViewState();</highlight></codeline>
<codeline lineno="233"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>_ui-&gt;comboBoxCharset-&gt;setCurrentText(opers.data()-&gt;charset);</highlight></codeline>
<codeline lineno="234"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>tracks<sp/>view<sp/>has<sp/>multiple<sp/>headers<sp/>(need<sp/>for<sp/>frozen<sp/>rows/columns)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="235"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>so<sp/>to<sp/>set<sp/>all<sp/>headers<sp/>special<sp/>methods<sp/>there<sp/>have<sp/>been<sp/>implemented</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="236"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>_ui-&gt;tracksView-&gt;setHHeaderResizeMode(QHeaderView::ResizeToContents);</highlight></codeline>
<codeline lineno="237"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="238"><highlight class="normal"></highlight></codeline>
<codeline lineno="239"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>ImportMidiPanel::canImportMidi()</highlight><highlight class="keyword"><sp/>const</highlight></codeline>
<codeline lineno="240"><highlight class="keyword"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="241"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>QFile(_midiFile).exists()<sp/>&amp;&amp;<sp/>_model-&gt;trackCountForImport()<sp/>&gt;<sp/>0;</highlight></codeline>
<codeline lineno="242"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="243"><highlight class="normal"></highlight></codeline>
<codeline lineno="244"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>ImportMidiPanel::canTryCancelChanges()</highlight><highlight class="keyword"><sp/>const</highlight></codeline>
<codeline lineno="245"><highlight class="keyword"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="246"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!_model-&gt;isAllApplied())</highlight></codeline>
<codeline lineno="247"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="248"><highlight class="normal"></highlight></codeline>
<codeline lineno="249"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">auto</highlight><highlight class="normal"><sp/>&amp;opers<sp/>=<sp/>preferences.midiImportOperations;</highlight></codeline>
<codeline lineno="250"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>MidiOperations::CurrentMidiFileSetter<sp/>setCurrentMidiFile(opers,<sp/>_midiFile);</highlight></codeline>
<codeline lineno="251"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!opers.data())</highlight></codeline>
<codeline lineno="252"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="253"><highlight class="normal"></highlight></codeline>
<codeline lineno="254"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(opers.data()-&gt;charset<sp/>!=<sp/>_ui-&gt;comboBoxCharset-&gt;currentText())</highlight></codeline>
<codeline lineno="255"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="256"><highlight class="normal"></highlight></codeline>
<codeline lineno="257"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>QByteArray<sp/>vData<sp/>=<sp/>_ui-&gt;tracksView-&gt;verticalHeader()-&gt;saveState();</highlight></codeline>
<codeline lineno="258"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>opers.data()-&gt;VHeaderData<sp/>!=<sp/>vData;</highlight></codeline>
<codeline lineno="259"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="260"><highlight class="normal"></highlight></codeline>
<codeline lineno="261"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>ImportMidiPanel::canMoveTrackUp(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>visualIndex)</highlight><highlight class="keyword"><sp/>const</highlight></codeline>
<codeline lineno="262"><highlight class="keyword"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="263"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>_model-&gt;trackCount()<sp/>&gt;<sp/>1<sp/>&amp;&amp;<sp/>visualIndex<sp/>&gt;<sp/>1;</highlight></codeline>
<codeline lineno="264"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="265"><highlight class="normal"></highlight></codeline>
<codeline lineno="266"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>ImportMidiPanel::canMoveTrackDown(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>visualIndex)</highlight><highlight class="keyword"><sp/>const</highlight></codeline>
<codeline lineno="267"><highlight class="keyword"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="268"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>_model-&gt;trackCount()<sp/>&gt;<sp/>1</highlight></codeline>
<codeline lineno="269"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;&amp;<sp/>visualIndex<sp/>&lt;<sp/>_model-&gt;trackCount()<sp/>&amp;&amp;<sp/>visualIndex<sp/>&gt;<sp/>0;</highlight></codeline>
<codeline lineno="270"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="271"><highlight class="normal"></highlight></codeline>
<codeline lineno="272"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>ImportMidiPanel::moveTrackUp()</highlight></codeline>
<codeline lineno="273"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="274"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>visIndex<sp/>=<sp/>currentVisualIndex();</highlight></codeline>
<codeline lineno="275"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(canMoveTrackUp(visIndex))</highlight></codeline>
<codeline lineno="276"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_ui-&gt;tracksView-&gt;verticalHeader()-&gt;moveSection(visIndex,<sp/>visIndex<sp/>-<sp/>1);</highlight></codeline>
<codeline lineno="277"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="278"><highlight class="normal"></highlight></codeline>
<codeline lineno="279"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>ImportMidiPanel::moveTrackDown()</highlight></codeline>
<codeline lineno="280"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="281"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>visIndex<sp/>=<sp/>currentVisualIndex();</highlight></codeline>
<codeline lineno="282"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(canMoveTrackDown(visIndex))</highlight></codeline>
<codeline lineno="283"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_ui-&gt;tracksView-&gt;verticalHeader()-&gt;moveSection(visIndex,<sp/>visIndex<sp/>+<sp/>1);</highlight></codeline>
<codeline lineno="284"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="285"><highlight class="normal"></highlight></codeline>
<codeline lineno="286"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>ImportMidiPanel::currentVisualIndex()</highlight><highlight class="keyword"><sp/>const</highlight></codeline>
<codeline lineno="287"><highlight class="keyword"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="288"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">auto</highlight><highlight class="normal"><sp/>selectedItems<sp/>=<sp/>_ui-&gt;tracksView-&gt;selectionModel()-&gt;selection().indexes();</highlight></codeline>
<codeline lineno="289"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>curRow<sp/>=<sp/>-1;</highlight></codeline>
<codeline lineno="290"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!selectedItems.isEmpty())</highlight></codeline>
<codeline lineno="291"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>curRow<sp/>=<sp/>selectedItems[0].row();</highlight></codeline>
<codeline lineno="292"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>visIndex<sp/>=<sp/>_ui-&gt;tracksView-&gt;verticalHeader()-&gt;visualIndex(curRow);</highlight></codeline>
<codeline lineno="293"><highlight class="normal"></highlight></codeline>
<codeline lineno="294"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>visIndex;</highlight></codeline>
<codeline lineno="295"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="296"><highlight class="normal"></highlight></codeline>
<codeline lineno="297"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>ImportMidiPanel::excludeMidiFile(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>QString<sp/>&amp;fileName)</highlight></codeline>
<codeline lineno="298"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="299"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>because<sp/>button<sp/>&quot;Apply&quot;<sp/>of<sp/>MIDI<sp/>import<sp/>operations</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="300"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>causes<sp/>reopen<sp/>of<sp/>the<sp/>current<sp/>score</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="301"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>we<sp/>need<sp/>to<sp/>prevent<sp/>MIDI<sp/>import<sp/>panel<sp/>from<sp/>closing<sp/>at<sp/>that<sp/>moment</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="302"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(_importInProgress<sp/>||<sp/>_reopenInProgress)</highlight></codeline>
<codeline lineno="303"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="304"><highlight class="normal"></highlight></codeline>
<codeline lineno="305"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">auto</highlight><highlight class="normal"><sp/>&amp;opers<sp/>=<sp/>preferences.midiImportOperations;</highlight></codeline>
<codeline lineno="306"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>opers.excludeMidiFile(fileName);</highlight></codeline>
<codeline lineno="307"><highlight class="normal"></highlight></codeline>
<codeline lineno="308"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(fileName<sp/>==<sp/>_midiFile)<sp/>{</highlight></codeline>
<codeline lineno="309"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_midiFile<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="310"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>resetTableViewState();</highlight></codeline>
<codeline lineno="311"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_model-&gt;clear();</highlight></codeline>
<codeline lineno="312"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>resetTableViewState();</highlight></codeline>
<codeline lineno="313"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="314"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="315"><highlight class="normal"></highlight></codeline>
<codeline lineno="316"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>ImportMidiPanel::setPreferredVisible(</highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>visible)</highlight></codeline>
<codeline lineno="317"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="318"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>_preferredVisible<sp/>=<sp/>visible;</highlight></codeline>
<codeline lineno="319"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="320"><highlight class="normal"></highlight></codeline>
<codeline lineno="321"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>ImportMidiPanel::setReopenInProgress()</highlight></codeline>
<codeline lineno="322"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="323"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>_reopenInProgress<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="324"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="325"><highlight class="normal"></highlight></codeline>
<codeline lineno="326"><highlight class="normal">}<sp/></highlight><highlight class="comment">//<sp/>namespace<sp/>Ms</highlight><highlight class="normal"></highlight></codeline>
    </programlisting>
    <location file="mscore/importmidi/importmidi_panel.cpp"/>
  </compounddef>
</doxygen>
