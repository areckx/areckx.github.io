<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MuseScore-2.2: mtest/README.md Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MuseScore-2.2
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('mtest_2_r_e_a_d_m_e_8md.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">mtest/README.md</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;Building &amp; running the tests</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;==================</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;To build all tests:</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;| Linux | OSX | Windows |</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;| ----- | --- | ------- |</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;| make debug&lt;br&gt;sudo make installdebug&lt;br&gt;cd build.debug/mtest&lt;br&gt;make&lt;/pre&gt; | make -f Makefile.osx debug&lt;br&gt;make -f Makefile.osx installdebug&lt;br&gt;cd build.debug/mtest&lt;br&gt;make -f Makefile.osx | mingw32-make -f Makefile.mingw debug&lt;br&gt;mingw32-make -f Makefile.mingw installdebug&lt;br&gt;cd build.debug\mtest&lt;br&gt;mingw32-make -f Makefile.mingw |</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;To run all tests:</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;    ctest</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;To run only one test (for debugging purposes):</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;    cd libmscore/join/</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;    ./tst_join</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;To see how the CI environment is doing it check `.travis.yml` and `build/run_tests.sh`</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;**Note: You need to have `diff` in your path. For Windows, get a copy of [diffutils for Windows](http://gnuwin32.sourceforge.net/packages/diffutils.htm &quot;diffutils for Windows&quot;).**</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;Test case conventions</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;====================</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;Tests are grouped in directories by feature (like libmscore or mxl). </div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;In these directories, each subdirectory represents a test suite for a particular sub feature.</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;The name of a test suite directory should be descriptive. The CPP file for the tests should use the same name as the directory, for example `tst_foo.cpp` in directory `foo`. It&#39;s good practice to include a README file in a test suite directory.</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;Test suite CPP files contain one slot per test case. Each file should be called foo-XX with XX being an incrementing count. If a test case uses a file and a ref file, they should be called `foo-XX` and `foo-XX-ref`, with the extension .mscx. A test case should not reuse a file from another test case.</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;To create reference or original files, MuseScore can be run with the `-t` command line argument and it will save all the files in the session in test mode. Such files do not contain platform or version information and do contain extra data for tracing (for example, they contains pixel level position for beams).</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;How to write a test case</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;===============</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;Import test</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;----------------</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;* Open a short file containing an individual case in one of the formats supported by MuseScore</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;* Save in MuseScore format</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;* Compare with reference file</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;At first the test will fail because there is no reference file. Open the file created by the test case in MuseScore and try to edit it to be sure it&#39;s valid. If the file is valid, save it (without version number) as a reference file.</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;Object read write</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;----------------</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;Create a test case for all elements and all properties in each element. See `libmscore/note`</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;* Create an object</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;* Set a property</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;* Write and read the object</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;* Check if the property has the right value</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;Action tests</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;----------------</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;See `libmscore/join` or `libmscore/split` for example </div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;* Read a score file</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;* Apply an action</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;* Write the file</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;* Compare with a reference</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;* (Undo the action)</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;* (Compare with original file)</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;Compatibility tests</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;----------------</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;Most of them are in `mtest/libmscore/compat`</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;* Read a score file from an older version of MuseScore</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;* Write the file</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;* Compare with a reference file</div></div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>README.md</b></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
